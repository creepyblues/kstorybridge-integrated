import{j as e}from"./ui-DHaiO8z9.js";import{r}from"./vendor-BZF0HjbR.js";import{C as E,a as I,b as L,c as A,L as x,I as p,B as g}from"./shared-oRVCA-__.js";import{u as P}from"./index-51_7LTNa.js";import{u as T}from"./router-DmKwpzBq.js";import{S as q,E as B,h as z,e as f}from"./icons-BVWbeyA4.js";import"./utils-CfDMlrKu.js";import"./backend-DY5GQkp5.js";function G(){const[n,b]=r.useState(""),[l,j]=r.useState(""),[i,w]=r.useState(!1),[o,a]=r.useState(""),[d,c]=r.useState(!1),{signIn:N,forceSignOut:y,session:v,isLoading:k}=P(),S=T(),C=async t=>{var m,h,u;t.preventDefault(),a(""),c(!0);const{error:s}=await N(n,l);s?(console.error("Login error details:",s),(m=s.message)!=null&&m.includes("Invalid login credentials")?a("Invalid email or password. Please check your credentials."):(h=s.message)!=null&&h.includes("Email not confirmed")?a("Email not confirmed. Please check your email for confirmation link."):(u=s.message)!=null&&u.includes("Too many requests")?a("Too many login attempts. Please wait a few minutes and try again."):a(`Login failed: ${s.message||"Unknown error occurred"}`)):S("/titles"),c(!1)};return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-white to-porcelain-blue-50 flex items-center justify-center px-6",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-16 h-16 bg-hanok-teal rounded-full flex items-center justify-center",children:e.jsx(q,{className:"w-8 h-8 text-white"})})}),e.jsx("h1",{className:"text-3xl font-bold text-midnight-ink mb-2",children:"Admin Portal"}),e.jsx("p",{className:"text-midnight-ink-600",children:"KStoryBridge Administration"}),e.jsx("p",{className:"text-sm text-midnight-ink-500 mt-2",children:"Secure admin authentication"})]}),e.jsxs(E,{className:"bg-white border-porcelain-blue-200 shadow-lg rounded-2xl",children:[e.jsx(I,{className:"text-center pb-4",children:e.jsx(L,{className:"text-xl text-midnight-ink",children:"Sign In"})}),e.jsx(A,{children:e.jsxs("form",{onSubmit:C,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"email",className:"text-midnight-ink font-medium",children:"Email Address"}),e.jsx(p,{id:"email",type:"email",value:n,onChange:t=>b(t.target.value),placeholder:"admin@kstorybridge.com",required:!0,autoComplete:"email",className:"bg-porcelain-blue-50 border-porcelain-blue-200 rounded-xl focus:ring-hanok-teal focus:border-hanok-teal"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"password",className:"text-midnight-ink font-medium",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(p,{id:"password",type:i?"text":"password",value:l,onChange:t=>j(t.target.value),placeholder:"Enter your password",required:!0,autoComplete:"current-password",className:"bg-porcelain-blue-50 border-porcelain-blue-200 rounded-xl focus:ring-hanok-teal focus:border-hanok-teal pr-10"}),e.jsx("button",{type:"button",onClick:()=>w(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-midnight-ink-400 hover:text-midnight-ink-600",children:i?e.jsx(B,{className:"w-4 h-4"}):e.jsx(z,{className:"w-4 h-4"})})]})]}),o&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(f,{className:"w-4 h-4 text-red-500 mt-0.5 shrink-0"}),e.jsx("p",{className:"text-red-600 text-sm",children:o})]})}),e.jsx(g,{type:"submit",disabled:d,className:"w-full bg-hanok-teal hover:bg-hanok-teal/90 text-white py-3 rounded-xl font-medium transition-colors",children:d?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Signing In..."]}):"Sign In"}),(v||k)&&e.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(f,{className:"w-4 h-4 text-yellow-600 mt-0.5 shrink-0"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-yellow-800 text-sm",children:"Session detected but stuck loading. This can happen if a previous session wasn't properly cleared."}),e.jsx(g,{type:"button",variant:"outline",size:"sm",onClick:()=>y(),className:"text-yellow-700 border-yellow-300 hover:bg-yellow-100",children:"Clear Session & Retry"})]})]})})]})})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsx("p",{className:"text-midnight-ink-500 text-sm",children:"Authorized personnel only. Contact IT support if you need access."})})]})})}export{G as default};
