import{j as e}from"./ui-DHaiO8z9.js";import{r as n}from"./vendor-BZF0HjbR.js";import{u as S,B as c,C as l,c as r,d as i,a as d,b as o,D,e as L,f as E,g as P,h as I}from"./shared-eQ5Wlos0.js";import{t as O}from"./titlesService-DmajcKX4.js";import{A as m}from"./AdminLayout-CLj11gFB.js";import{b as B,u as F}from"./router-DmKwpzBq.js";import{j as H,k as V,h as f,H as R,l as M,F as u,m as U,X as $}from"./icons-BkT83dpJ.js";import"./utils-CfDMlrKu.js";import"./index-opfOCVSx.js";import"./backend-DY5GQkp5.js";function ee(){var N;const{titleId:x}=B(),h=F(),{toast:b}=S(),[s,y]=n.useState(null),[v,g]=n.useState(!0),[w,p]=n.useState(!1);n.useEffect(()=>{x&&k(x)},[x]);const k=async t=>{try{g(!0);const a=await O.getTitleById(t);y(a)}catch(a){console.error("Error loading title:",a),b({title:"Error loading title",variant:"destructive"})}finally{g(!1)}},j=t=>Array.isArray(t)?t.map(a=>a.replace("_"," ").replace(/\b\w/g,T=>T.toUpperCase())).join(", "):t.replace("_"," ").replace(/\b\w/g,a=>a.toUpperCase()),_=t=>t.replace("_"," ").replace(/\b\w/g,a=>a.toUpperCase()),C=t=>{if(!t)return"0";const a=t.toLocaleString();return t>=1e3&&t%1e3===0?`${a} (est)`:a},A=t=>!t||t===0?"N/A":t.toLocaleString();return v?e.jsx(m,{children:e.jsx("div",{className:"text-center text-gray-600 py-8",children:"Loading title..."})}):s?e.jsx(m,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-8",children:e.jsxs(c,{onClick:()=>h("/titles"),variant:"ghost",className:"text-gray-600 hover:text-gray-800",children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Back to Titles"]})}),e.jsx(l,{className:"bg-white border-gray-200 shadow-lg rounded-2xl mb-12",children:e.jsx(r,{className:"p-8",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-4xl font-bold text-midnight-ink mb-2",children:s.title_name_en||s.title_name_kr}),s.title_name_kr&&s.title_name_en&&e.jsx("p",{className:"text-lg text-gray-500 font-medium mb-4",children:s.title_name_kr}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500 mt-4",children:[s.story_author&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-hanok-teal",children:"Story by"})," ",e.jsx("span",{className:"text-gray-600",children:s.story_author})]}),s.art_author&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-hanok-teal",children:"Art by"})," ",e.jsx("span",{className:"text-gray-600",children:s.art_author})]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-3 ml-6",children:[e.jsx("div",{className:"flex gap-2",children:e.jsxs(c,{onClick:()=>h(`/titles/${s.title_id}/edit`),className:"bg-hanok-teal hover:bg-hanok-teal/90 text-white",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Edit Title"]})}),e.jsx(i,{variant:"outline",className:"border-blue-500 text-blue-500 bg-blue-50",children:"Admin View"})]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-16",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsx(l,{className:"bg-white border-gray-200 shadow-lg rounded-2xl overflow-hidden",children:e.jsx(r,{className:"p-0",children:s.title_image?e.jsx("div",{className:"w-full h-96 bg-gray-100 overflow-hidden",children:e.jsx("img",{src:s.title_image,alt:s.title_name_en||s.title_name_kr,className:"w-full h-full object-cover",onError:t=>{t.currentTarget.style.display="none",t.currentTarget.parentElement.classList.add("flex","items-center","justify-center"),t.currentTarget.parentElement.innerHTML='<span class="text-gray-500">No Image Available</span>'}})}):e.jsx("div",{className:"w-full h-96 bg-gradient-to-br from-blue-100 to-green-100 flex items-center justify-center",children:e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("div",{className:"w-16 h-20 bg-gray-300 rounded-lg"}),e.jsx("div",{className:"w-20 h-24 bg-gray-200 rounded-lg"}),e.jsx("div",{className:"w-16 h-20 bg-gray-300 rounded-lg"})]})})})}),s.title_url&&e.jsx("div",{className:"border border-gray-200 rounded-lg p-3",children:e.jsxs("a",{href:s.title_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 text-hanok-teal hover:text-hanok-teal/80 font-medium text-sm transition-colors",children:[e.jsx(f,{className:"h-4 w-4"}),"View Original Content"]})}),s.tagline&&e.jsx("div",{className:"py-3 px-4 bg-hanok-teal/5 rounded-lg border-l-4 border-hanok-teal",children:e.jsxs("p",{className:"text-gray-700 font-medium italic",children:['"',s.tagline,'"']})}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.genre&&(Array.isArray(s.genre)?s.genre.length>0:!0)&&e.jsx("div",{className:"flex flex-wrap gap-2",children:Array.isArray(s.genre)?s.genre.map((t,a)=>e.jsx(i,{variant:"outline",className:"border-hanok-teal text-hanok-teal bg-hanok-teal/5 px-3 py-1",children:j(t)},a)):e.jsx(i,{variant:"outline",className:"border-hanok-teal text-hanok-teal bg-hanok-teal/5 px-3 py-1",children:j(s.genre)})}),s.content_format&&e.jsx(i,{variant:"outline",className:"border-blue-500 text-blue-500 bg-blue-50 px-3 py-1",children:_(s.content_format)})]}),e.jsx(l,{className:"bg-white border-gray-200 shadow-lg rounded-2xl",children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-bold text-midnight-ink text-sm uppercase tracking-wide",children:"Statistics"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-blue-50 rounded-lg",children:[e.jsx(f,{className:"h-4 w-4 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-hanok-teal",children:"Views"}),e.jsx("p",{className:"font-medium text-gray-600 text-sm",children:C(s.views||0)})]})]}),e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 rounded-lg",children:[e.jsx(R,{className:"h-4 w-4 text-red-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-hanok-teal",children:"Likes"}),e.jsx("p",{className:"font-medium text-gray-600 text-sm",children:A(s.likes||0)})]})]})]}),s.rating&&s.rating_count&&s.rating_count>0&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-yellow-50 rounded-lg",children:[e.jsx(M,{className:"h-5 w-5 text-yellow-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-hanok-teal",children:"Rating"}),e.jsxs("p",{className:"font-medium text-gray-600 text-sm",children:[s.rating.toFixed(1)," (",s.rating_count," reviews)"]})]})]})]})]})})}),s.note&&e.jsxs(l,{className:"bg-white border-gray-200 shadow-lg rounded-2xl",children:[e.jsx(d,{children:e.jsxs(o,{className:"text-midnight-ink text-xl flex items-center gap-2",children:[e.jsx(u,{className:"h-5 w-5 text-hanok-teal"}),"Note"]})}),e.jsx(r,{children:e.jsx("div",{className:"p-4 bg-gradient-to-r from-hanok-teal/5 to-porcelain-blue-50 rounded-lg border-l-4 border-hanok-teal",children:e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed whitespace-pre-wrap",children:s.note})})})]})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(l,{className:"bg-white border-gray-200 shadow-lg rounded-2xl",children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[e.jsx(o,{className:"text-midnight-ink text-xl",children:"Content Details"}),s.pitch&&e.jsxs(D,{open:w,onOpenChange:p,children:[e.jsx(L,{asChild:!0,children:e.jsxs(c,{className:"bg-gradient-to-r from-purple-600 via-purple-700 to-indigo-600 hover:from-purple-700 hover:via-purple-800 hover:to-indigo-700 text-white shadow-xl border-0 rounded-full px-5 py-2.5 text-sm font-bold transition-all duration-300 transform hover:scale-110 hover:shadow-2xl relative overflow-hidden group",children:[e.jsx(U,{className:"h-4 w-4 mr-2 text-yellow-300 animate-pulse"}),e.jsx(u,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"relative z-10",children:"View Pitch Document"})]})}),e.jsxs(E,{className:"max-w-6xl max-h-[90vh] p-0",children:[e.jsx(P,{className:"p-6 pb-0",children:e.jsxs(I,{className:"flex items-center justify-between",children:[e.jsxs("span",{children:["Pitch Document - ",s.title_name_en||s.title_name_kr]}),e.jsxs(c,{variant:"ghost",size:"sm",onClick:()=>p(!1),className:"h-8 w-8 p-0",children:[e.jsx($,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})}),e.jsx("div",{className:"p-6 pt-0",children:e.jsx("iframe",{src:s.pitch,className:"w-full h-[80vh] border-0 rounded-lg",title:`${s.title_name_en||s.title_name_kr} - Pitch Document`})})]})]})]}),e.jsx(r,{children:e.jsxs("div",{className:"space-y-6",children:[s.synopsis&&e.jsxs("div",{children:[e.jsx("h5",{className:"font-bold text-hanok-teal mb-2",children:"Synopsis"}),e.jsx("p",{className:"text-gray-600 leading-relaxed text-sm mb-4",children:s.synopsis})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-bold text-hanok-teal mb-2",children:"Description"}),s.description?e.jsx("p",{className:"text-gray-600 leading-relaxed text-base",children:s.description}):e.jsx("p",{className:"text-gray-500 italic text-sm",children:"No description available for this title."})]}),e.jsxs("div",{className:"pt-6 border-t border-gray-200 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-bold text-hanok-teal mb-1",children:"Perfect For"}),e.jsx("p",{className:"text-gray-600 text-sm",children:s.perfect_for||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-bold text-hanok-teal mb-1",children:"Comps"}),s.comps&&s.comps.length>0?e.jsx("div",{className:"flex flex-wrap gap-1",children:s.comps.map((t,a)=>e.jsx("span",{className:"bg-gray-100 text-gray-800 px-2 py-1 rounded text-xs",children:t},a))}):e.jsx("p",{className:"text-gray-600 text-sm",children:"Not specified"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-bold text-hanok-teal mb-1",children:"Tone"}),e.jsx("p",{className:"text-gray-600 text-sm",children:s.tone||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-bold text-hanok-teal mb-1",children:"Audience"}),e.jsx("p",{className:"text-gray-600 text-sm",children:s.audience||"Not specified"})]})]})]})]})})]}),e.jsxs(l,{className:"bg-white border-gray-200 shadow-lg rounded-2xl",children:[e.jsx(d,{children:e.jsx(o,{className:"text-midnight-ink text-xl",children:"Title Information"})}),e.jsx(r,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[s.author&&e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-hanok-teal mb-1",children:"Story Author (Original Author)"}),e.jsx("p",{className:"text-gray-600 text-sm",children:s.author})]}),s.writer&&e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-hanok-teal mb-1",children:"Writer"}),e.jsx("p",{className:"text-gray-600 text-sm",children:s.writer})]}),s.illustrator&&e.jsxs("div",{children:[e.jsx("h5",{className:"font-semibold text-hanok-teal mb-1",children:"Art Author (Artist)"}),e.jsx("p",{className:"text-gray-600 text-sm",children:s.illustrator})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-bold text-hanok-teal mb-1",children:"Rights"}),e.jsx("p",{className:"text-gray-600 text-sm",children:s.rights||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-bold text-hanok-teal mb-1",children:"Rights Owner"}),e.jsx("p",{className:"text-gray-600 text-sm",children:s.rights_owner||"Not specified"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-bold text-hanok-teal mb-1",children:"Series Status"}),e.jsx("p",{className:"text-gray-600 text-sm",children:s.completed!==null&&s.completed!==void 0?String(s.completed):"null"})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-bold text-hanok-teal mb-1",children:"Number of Chapters"}),e.jsx("p",{className:"text-gray-600 text-sm",children:((N=s.chapters)==null?void 0:N.toLocaleString())||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-bold text-hanok-teal mb-1",children:"Creator ID"}),e.jsx("p",{className:"text-gray-600 text-sm font-mono text-xs",children:s.creator_id})]})]})]})})]}),s.tags&&s.tags.length>0&&e.jsxs(l,{className:"bg-white border-gray-200 shadow-lg rounded-2xl",children:[e.jsx(d,{children:e.jsx(o,{className:"text-midnight-ink text-xl",children:"Tags"})}),e.jsx(r,{children:e.jsx("div",{className:"flex flex-wrap gap-3",children:s.tags.map((t,a)=>e.jsx(i,{variant:"secondary",className:"bg-gray-100 text-gray-600 px-3 py-1 text-xs",children:t},a))})})]})]})]})]})}):e.jsx(m,{children:e.jsx("div",{className:"text-center text-gray-600 py-8",children:"Title not found"})})}export{ee as default};
